#:import sm kivy.uix.screenmanager

ScreenManager
    id:manager
    transition:sm.FadeTransition(duration=.0)
    MDScreen:
        name:"home"
        md_bg_color: "#f4f5f7"
        FloatLayout:
            MDSpinner:
                id:spine_del
                size_hint: None, None
                size: dp(40), dp(40)
                pos_hint: {'center_x': .5, 'center_y':.5}
                active: False
                color: "#0F0A0A"
            MDIcon:
                icon:"account-tie-woman"
                font_size:"85sp"
                theme_text_color: "Custom"
                text_color: "#ffd241"
                pos_hint:{"center_x":.15, "center_y":.75}
            MDLabel:
                text:'Welcome to the'
                halign:"center"
                font_style:'H4'
                pos_hint:{'center_x':.35, 'center_y':.65}
            MDLabel:
                bold:True
                text:'WAITER APP'
                halign:"center"
                font_style:'H4'
                pos_hint:{'center_x':.35, 'center_y':.6}
            NumberOnlyField:
                id:phone
                mode: "rectangle"
                fill_color: 0, 0, 0, .4
                size_hint: .8, .1
                pos_hint:{'center_x':.5, 'center_y':.48}
                hint_text:"User Phone:"
                text_color: 0, 0, 0, 1
                font_size: dp(25)
            MDTextField:
                id:password
                mode: "rectangle"
                fill_color: 0, 0, 0, .4
                size_hint: .8, .1
                pos_hint:{'center_x':.5, 'center_y':.38}
                hint_text:"Password:"
                text_color: 0, 0, 0, 1
                font_size: dp(25)
            MDFillRoundFlatButton:
                id:login
                text: "Sign in"
                size_hint: .8, .06
                pos_hint:{'center_x':.5, 'center_y':.26}
                md_bg_color: "#0F0A0A"
                on_release:
                    app.spinner()
                    app.login_waiter(phone.text, password.text)

    MDScreen:
        name:"orders"
        md_bg_color: "#f4f5f7"
        FloatLayout:
            MDLabel:
                bold:True
                text:"ORDERS"
                halign:"center"
                font_style:'H4'
                pos_hint:{'center_x':.5, 'center_y':.93}
            MDIconButton:
                icon:"segment"
                icon_size: "45sp"
                pos_hint:{"center_x":.9, "center_y":.93}
            MDFillRoundFlatButton:
                id:order
                text: "Make New Order"
                size_hint: .8, .06
                pos_hint:{'center_x':.5, 'center_y':.85}
                md_bg_color: "#0F0A0A"
            Card
                pos_hint:{'center_x':.5, 'center_y':.74}

            MDFlatButton:
                id:pend
                md_bg_color: "#ffd241"
                text:"Pending(5)"
                font_size:"18sp"
                pos_hint:{'center_x':.18, 'center_y':.74}
                on_release:
                    app.pending()
                    #app.orders()
            MDFlatButton:
                id:pre
                md_bg_color: "white"
                text:"Preparing(2)"
                font_size:"18sp"
                pos_hint:{'center_x':.5, 'center_y':.74}
                on_release:
                    app.prepare()
            MDFlatButton:
                id:comp
                md_bg_color: "white"
                text:"Completed(0)"
                font_size:"18sp"
                pos_hint:{'center_x':.83, 'center_y':.74}
                on_release:
                    app.complete()
            MDLabel:
                bold:True
                text:"Table No"
                halign:"center"
                pos_hint:{'center_x':.15, 'center_y':.64}
            MDLabel:
                #bold:True
                text:"Time"
                halign:"center"
                pos_hint:{'center_x':.4, 'center_y':.64}
            MDLabel:
                #bold:True
                text:"Pending Items"
                halign:"center"
                pos_hint:{'center_x':.7, 'center_y':.64}
        BoxLayout:
            RecycleView:
                id:today
                key_viewclass: 'viewclass'
                key_size: 'height'
                pos_hint:{"top":.61}
                RecycleBoxLayout:
                    id:wa
                    spacing:dp(4)
                    padding: dp(10)
                    default_size: None, dp(60)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'

    MDScreen:
        name:"in_table"
        md_bg_color: "#f4f5f7"
        FloatLayout:
            MDIconButton:
                icon:"chevron-left"
                icon_size: "45sp"
                pos_hint:{'center_x':.08, 'center_y':.93}
                on_release:
                    app.screen_capture("tables")
            MDIconButton:
                icon:"segment"
                icon_size: "45sp"
                pos_hint:{"center_x":.9, "center_y":.93}
            Order
                pos_hint:{"center_x":.5, "center_y":.83}
                size:app.size_x/2.1, app.size_y/7.5
                FloatLayout:
                    MDIcon:
                        icon: "account-group"
                        font_size:"30sp"
                        theme_text_color: "Custom"
                        text_color: "#ffd241"
                        pos_hint:{'center_x':.13, 'center_y':.8}
                    MDLabel:
                        text:"2/6"
                        halign:"center"
                        font_size:"18sp"
                        pos_hint:{'center_x':.13, 'center_y':.3}
                    MDIcon:
                        icon: "clock-outline"
                        font_size:"30sp"
                        theme_text_color: "Custom"
                        text_color: "#ffd241"
                        pos_hint:{'center_x':.5, 'center_y':.8}
                    MDLabel:
                        text:"00:40"
                        halign:"center"
                        font_size:"18sp"
                        pos_hint:{'center_x':.5, 'center_y':.3}
                    MDIcon:
                        icon: "table-chair"
                        font_size:"30sp"
                        theme_text_color: "Custom"
                        text_color: "#ffd241"
                        pos_hint:{'center_x':.88, 'center_y':.8}
                    MDLabel:
                        text:"06"
                        bold:True
                        halign:"center"
                        font_size:"20sp"
                        pos_hint:{'center_x':.89, 'center_y':.3}
            Order
                pos_hint:{"center_x":.5, "center_y":.65}
                size:app.size_x/2.1, app.size_y/7.5
                md_bg_color: "#f4f5f7"
                radius: [12]
                FloatLayout:
                    MDSeparator:
                        pos_hint:{'center_x':.5, 'center_y':1.15}
                    MDLabel:
                        text:"Large pizza"
                        halign:"left"
                        font_size:"18sp"
                        pos_hint:{'center_x':.51, 'center_y':.8}
                    MDLabel:
                        text:"1x"
                        halign:"left"
                        font_size:"18sp"
                        pos_hint:{'center_x':.51, 'center_y':.3}
                    MDLabel:
                        text:"Pending"
                        halign:"center"
                        font_size:"18sp"
                        pos_hint:{'center_x':.5, 'center_y':.8}
                    MDLabel:
                        text:"$20"
                        halign:"center"
                        font_size:"18sp"
                        pos_hint:{'center_x':.89, 'center_y':.8}
                    MDChip:
                        text:"Mark Served"
                        md_bg_color:"#ffd241"
                        theme_text_color: "Custom"
                        text_color: "#0F0A0A"
                        pos_hint:{'center_x':.5, 'center_y':.3}
                    MDSeparator:
                        pos_hint:{'center_x':.5, 'center_y':-.15}
            Order
                pos_hint:{"center_x":.5, "center_y":.55}
                size:app.size_x/2.1, app.size_y/7.5
                md_bg_color: "#f4f5f7"
                radius: [12]
                FloatLayout:
                    MDSeparator:
                        pos_hint:{'center_x':.5, 'center_y':1.15}
                    MDLabel:
                        text:"Bugger"
                        halign:"left"
                        font_size:"18sp"
                        pos_hint:{'center_x':.51, 'center_y':.8}
                    MDLabel:
                        text:"3x"
                        halign:"left"
                        font_size:"18sp"
                        pos_hint:{'center_x':.51, 'center_y':.3}
                    MDIcon:
                        icon:"check-circle"
                        font_size:"18sp"
                        theme_text_color: "Custom"
                        text_color: "#108a00"
                        pos_hint:{'center_x':.62, 'center_y':.8}
                    MDLabel:
                        text:"Served"
                        halign:"center"
                        font_size:"18sp"
                        pos_hint:{'center_x':.5, 'center_y':.8}
                    MDLabel:
                        text:"$25"
                        halign:"center"
                        font_size:"18sp"
                        pos_hint:{'center_x':.89, 'center_y':.8}
                    MDSeparator:
                        pos_hint:{'center_x':.5, 'center_y':-.15}
            Order
                pos_hint:{"center_x":.5, "center_y":.4}
                size:app.size_x/2.1, app.size_y/7.5
                md_bg_color: "#f4f5f7"
                radius: [12]
                MDSeparator:
                    pos_hint:{'center_x':.5, 'center_y':1.15}
                MDLabel:
                    text:"Total"
                    halign:"center"
                    font_size:"18sp"
                    pos_hint:{'center_x':.5, 'center_y':.5}
                MDLabel:
                    text:"$45"
                    halign:"center"
                    font_size:"18sp"
                    pos_hint:{'center_x':.89, 'center_y':.5}
                MDSeparator:
                    pos_hint:{'center_x':.5, 'center_y':-.15}
            MDLabel:
                bold:True
                text:"Item"
                halign:"center"
                pos_hint:{'center_x':.1, 'center_y':.73}
            MDLabel:
                bold:True
                text:"Status"
                halign:"center"
                pos_hint:{'center_x':.5, 'center_y':.73}
            MDLabel:
                bold:True
                text:"Price"
                halign:"center"
                pos_hint:{'center_x':.88, 'center_y':.73}

            MDFillRoundFlatButton:
                id:order
                text: "Add Order"
                size_hint: .8, .06
                pos_hint:{'center_x':.5, 'center_y':.2}
                md_bg_color: "#0F0A0A"

            MDFillRoundFlatButton:
                id:order
                text: "Confirm  Payment"
                size_hint: .8, .06
                pos_hint:{'center_x':.5, 'center_y':.1}
                md_bg_color: "#0F0A0A"

    MDScreen:
        name:"food"
        md_bg_color: "#f4f5f7"
        FloatLayout:
            MDIconButton:
                icon:"chevron-left"
                icon_size: "45sp"
                pos_hint:{'center_x':.08, 'center_y':.93}
            MDIconButton:
                icon:"segment"
                icon_size: "45sp"
                pos_hint:{"center_x":.9, "center_y":.93}

            Order
                pos_hint:{"center_x":.5, "center_y":.85}
                size:app.size_x/1.8, app.size_y/14
                ripple_behavior: False
                md_bg_color: "#f4f5f7"
                radius: [0]
                FloatLayout:
                    MDSeparator:
                        pos_hint:{'center_x':.5, 'center_y':1.5}
                    MDLabel:
                        text:"Table No:"
                        halign:"center"
                        font_size:"13sp"
                        pos_hint:{'center_x':.45, 'center_y':.5}
                    MDLabel:
                        text:"03"
                        bold:True
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.55, 'center_y':.5}
                    MDSeparator:
                        pos_hint:{'center_x':.5, 'center_y':-.5}

            Order
                pos_hint:{"center_x":.5, "center_y":.75}
                size:app.size_x/2.1, app.size_y/12
                ripple_behavior: False
                md_bg_color: "#f4f5f7"
                radius: [12]
                FloatLayout:
                    MDLabel:
                        text:"Chicken Tandoor"
                        halign:"left"
                        font_size:"13sp"
                        pos_hint:{'center_x':.51, 'center_y':.5}
                    MDLabel:
                        text:"$25"
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.5, 'center_y':.5}
                    MDFillRoundFlatButton:
                        id:add
                        text:"Add"
                        size_hint: .2, .02
                        theme_text_color: "Custom"
                        text_color: "#0F0A0A"
                        md_bg_color:"#ffd241"
                        pos_hint:{'center_x':.89, 'center_y':.5}
                        on_release:
                            add.pos_hint = {'center_x':.89, 'center_y':88}
                            minus.pos_hint = {"center_x":.82, "center_y":.5}
                            no.pos_hint =  {'center_x':.89, 'center_y':.5}
                            plus.pos_hint = {"center_x":.95, "center_y":.5}
                    MDIconButton:
                        id:minus
                        icon:"minus-circle"
                        icon_size: "20sp"
                        pos_hint:{"center_x":.82, "center_y":88}
                    MDLabel:
                        id:no
                        text:"01"
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.89, 'center_y':88}
                    MDIconButton:
                        id:plus
                        icon:"plus-circle"
                        icon_size: "20sp"
                        pos_hint:{"center_x":.95, "center_y":88}
            Order
                pos_hint:{"center_x":.5, "center_y":.68}
                size:app.size_x/2.1, app.size_y/12
                ripple_behavior: False
                md_bg_color: "#f4f5f7"
                radius: [12]
                FloatLayout:
                    MDLabel:
                        text:"Fry Fish"
                        halign:"left"
                        font_size:"13sp"
                        pos_hint:{'center_x':.51, 'center_y':.5}
                    MDLabel:
                        text:"$15"
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.5, 'center_y':.5}
                    MDFillRoundFlatButton:
                        id:ad
                        text:"Add"
                        size_hint: .2, .02
                        theme_text_color: "Custom"
                        text_color: "#0F0A0A"
                        md_bg_color:"#ffd241"
                        pos_hint:{'center_x':.89, 'center_y':.5}
                        on_release:
                            ad.pos_hint = {'center_x':.89, 'center_y':88}
                            minu.pos_hint = {"center_x":.82, "center_y":.5}
                            n.pos_hint =  {'center_x':.89, 'center_y':.5}
                            plu.pos_hint = {"center_x":.95, "center_y":.5}
                    MDIconButton:
                        id:minu
                        icon:"minus-circle"
                        icon_size: "20sp"
                        pos_hint:{"center_x":.82, "center_y":88}
                    MDLabel:
                        id:n
                        text:"01"
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.89, 'center_y':88}
                    MDIconButton:
                        id:plu
                        icon:"plus-circle"
                        icon_size: "20sp"
                        pos_hint:{"center_x":.95, "center_y":88}

            Order
                pos_hint:{"center_x":.5, "center_y":.04}
                size:app.size_x/1.8, app.size_y/14
                ripple_behavior: False
                #md_bg_color: "#f4f5f7"
                radius: [0]
                FloatLayout:
                    MDLabel:
                        text:"1 item"
                        halign:"left"
                        font_size:"13sp"
                        pos_hint:{'center_x':.55, 'center_y':.8}
                    MDLabel:
                        text:"TOTAL"
                        bold:True
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.7, 'center_y':.8}
                    MDLabel:
                        id:no
                        text:"$45"
                        halign:"center"
                        font_size:"16sp"
                        pos_hint:{'center_x':.89, 'center_y':.8}

    MDScreen:
        name:"test"
        on_enter:
            app.table()
        md_bg_color: "#f4f5f7"
        FloatLayout:
        BoxLayout:
            RecycleView:
                id:test
                key_viewclass: 'viewclass'
                key_size: 'height'
                pos_hint:{"top":.8}
                RecycleBoxLayout:
                    id:wa
                    spacing:dp(4)
                    padding: dp(10)
                    default_size: None, dp(60)
                    default_size_hint: 1, None
                    cols: 3
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: 'vertical'


    MDScreen:
        name:"tables"
        md_bg_color: "#f4f5f7"
        FloatLayout:
            MDLabel:
                bold:True
                text:"TABLES"
                halign:"center"
                font_style:'H4'
                pos_hint:{'center_x':.5, 'center_y':.93}
            MDIconButton:
                icon:"segment"
                icon_size: "45sp"
                pos_hint:{"center_x":.9, "center_y":.93}
            Table
                pos_hint:{"center_x":.2, "center_y":.8}
            Table
                pos_hint:{"center_x":.5, "center_y":.8}
            Table
                pos_hint:{"center_x":.8, "center_y":.8}

            Table
                pos_hint:{"center_x":.2, "center_y":.63}
            Empty
                pos_hint:{"center_x":.5, "center_y":.63}
            Table
                pos_hint:{"center_x":.8, "center_y":.63}

            Table
                pos_hint:{"center_x":.2, "center_y":.46}
            Table
                pos_hint:{"center_x":.5, "center_y":.46}
            Table
                pos_hint:{"center_x":.8, "center_y":.46}

            Empty
                pos_hint:{"center_x":.2, "center_y":.29}
            Table
                pos_hint:{"center_x":.5, "center_y":.29}
            Table
                pos_hint:{"center_x":.8, "center_y":.29}

            Table
                pos_hint:{"center_x":.2, "center_y":.12}
            Table
                pos_hint:{"center_x":.5, "center_y":.12}
            Empty
                pos_hint:{"center_x":.8, "center_y":.12}

    MDScreen:
        name:"aq"
        FloatLayout:
            RowCard:
                icon:"dog"
                name:"00:15"
                price:"3"


    MDScreen:
        name:"genesis"
        md_bg_color: "#f4f5f7"
        MDTextField:
            id:food
            mode: "rectangle"
            fill_color: 0, 0, 0, .4
            size_hint: .8, .1
            pos_hint:{'center_x':.5, 'center_y':.6}
            hint_text:"Food oder:"
            text_color: 0, 0, 0, 1
            font_size: dp(25)

        MDIconButton:
            icon: "language-python"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release:
                app.qrcode(food.text)

    MDScreen:
        name:"qr"
        FloatLayout:
            Image:
                source:"qr_code.png"
                pos_hint: {"center_x": .5, "center_y": .3}


<Card@MDBoxLayout>:
    radius:10
    #height:240
    size:app.size_x/2,app.size_y/9.9
    md_bg_color:1, 1, 1, 1
    adaptive_height:True
    adaptive_width:True

<Order>:
    #orientation: "vertical"
    md_bg_color: 1, 1, 1, 1
    padding: "10dp"
    #spacing: "5dp"
    border_radius: 3
    border_color_a: .5
    border_color_a: 1
    adaptive_height:True
    radius: [10]
    size_hint: None, None
    size: app.size_x/1.5, app.size_y/11
    focus_behavior: False
    ripple_color:.9, .9, .95, 1
    ripple_behavior: True

<RowCard>:
    #orientation: "vertical"
    md_bg_color: 1, 1, 1, 1
    padding: "10dp"
    #spacing: "5dp"
    border_radius: 3
    border_color_a: .5
    border_color_a: 1
    adaptive_height:True
    radius: [10]
    size_hint: None, None
    size: app.size_x/1.5, app.size_y/11
    focus_behavior: False
    ripple_color:.9, .9, .95, 1
    ripple_behavior: True
    FloatLayout:
        MDIcon:
            icon:root.icon
            badge_icon:"numeric-10"
            font_size:"30sp"
            theme_text_color:"Custom"
            text_color: "#ffd241"
            pos_hint:{"center_x":.08,"center_y":.5}
        MDLabel:
            text:root.name
            font_size:"15sp"
            halign:"center"
            pos_hint:{"center_x":.4,"center_y":.5}
        MDLabel:
            text:root.price
            halign:"center"
            pos_hint:{"center_x":.65,"center_y":.5}
        MDIcon:
            icon:"chevron-right"
			font_size:"41sp"
			theme_text_color:"Custom"
			text_color:"#ffd241"
			pos_hint:{"center_x":.9,"center_y":.5}


<Table>
    orientation: "vertical"
    size_hint: None, None
    size: app.size_x/7, app.size_y/5.5
    radius: [13]
    elevation: 2
    md_bg_color: "#f4f5f7"
    focus_behavior: False
    ripple_color:.9, .9, .95, 1
    ripple_behavior: True
    FloatLayout:
        MDIcon:
            icon:"account-group"
            #badge_icon:"numeric-10"
            font_size:"30sp"
            theme_text_color:"Custom"
            text_color: "#ffd241"
            pos_hint:{"center_x":.2,"center_y":.8}
        MDLabel:
            text:root.number
            font_style:"H6"
            halign:"center"
            pos_hint:{"center_x":.8,"center_y":.8}
        MDLabel:
            text:root.guest
            halign:"center"
            font_size:"10sp"
            pos_hint:{"center_x":.2,"center_y":.6}
        MDLabel:
            text:root.status
            bold:True
            halign:"center"
            font_size:"12sp"
            pos_hint:{"center_x":.5,"center_y":.4}
        MDLabel:
            text:root.time
            halign:"center"
            font_size:"10sp"
            pos_hint:{"center_x":.2,"center_y":.12}
        MDLabel:
            text:root.price
            halign:"center"
            font_size:"10sp"
            pos_hint:{"center_x":.7,"center_y":.12}


<Empty>
    orientation: "vertical"
    size_hint: None, None
    size: app.size_x/7, app.size_y/5.5
    radius: [13]
    elevation: 2
    focus_behavior: False
    ripple_color:.9, .9, .95, 1
    ripple_behavior: True
    FloatLayout:
        MDLabel:
            text:root.number
            font_style:"H6"
            halign:"center"
            pos_hint:{"center_x":.8,"center_y":.8}
        MDLabel:
            text:"Empty"
            theme_text_color: "Custom"
            text_color:"gray"
            halign:"center"
            font_size:"20sp"
            pos_hint:{"center_x":.5,"center_y":.5}